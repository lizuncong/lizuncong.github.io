## 服务分类
- 前端
- 网关。处理请求转发和一些通用的逻辑，例如常见的Nginx
- 业务网关。处理业务相关的逻辑。比如一些通用的协议转化，通用的鉴权处理及其他统一的业务安全处理等
- 运营系统。负责日常的运营活动或运营系统
- 业务系统。负责核心的业务功能的系统
- 中台服务。负责一些通用App类的服务，比如配置下发、消息系统及用户反馈系统等
- 各类基础层。较单一的核心后台服务，例如用户模块，需根据不同业务设计不同的核心底层服务

以上分类不能代表所有的服务，但各个系统都或多或少包含这些服务。


在以上服务中，我们需要寻找网络I/O较多，但CPU计算较少，业务复杂度高的服务，可分析出Node.js应用在业务网关、中台服务及运营系统几方面

## 为什么Node.js更合适？
分别从系统的业务场景及系统特性来分析为什么Node.js更合适

### 业务网关
比如后台管理系统有鉴权模块，以往是在管理后台服务中增加一个鉴权的类，然后在统一路由处增加鉴权判断。现在不仅是管理系统需要使用这个鉴权类，多个管理系统都需要这个鉴权类，这时你会考虑复制这个类到其他项目又或者设计一个专门的服务来做鉴权。

这些场景都是基于缓存来处理业务逻辑的，大部分是网络I/O，未涉及CPU密集型逻辑。这是Node.js的优势。其次异步驱动方案能处理更高的并发。在这类场景技术选型中，可以考虑使用Node.js作为服务端语言。

### 中台服务
在Web或App应用中都存在一些通用服务，以往都是独立接口、独立开发。随着公司应用越来越多，需要将一些通用的业务服务进行集中。这也是中台的概念，而这部分业务场景往往也是网络I/O高并发较大、业务关联性高、数据库读写压力相对较小。

比如：
- 前端配置系统。在服务端根据客户端的版本设备、地区和语言下发不同的配置
- 反馈系统。用户可在任何平台调用反馈接口并将反馈内容写入队列，并落地到系统中进行综合分析。
- 推送系统。用于管理消息推送，用户红点和消息数的拉取及消息列表的管理。
- 系统工具。用于处理用户端日志捞取、用户端信息调试上报、性能定位问题分析提取


从以上可以看出，在中台系统的设计中，系统着重关注：网络I/O，并发，通用性及业务复杂度，一般情况下不涉及复杂的CPU运算。

Node.js作为中台服务，要求是：
- 通用性必须好
- 低CPU运算
- 网络I/O高或者低都行
- 并发高或者低都行

这样的服务在Node.js主线程中，可快速处理各类业务场景，不会存在阻塞的情况，因此这类场景也适合使用Node.js作为服务端语言。

### 运营系统
在各类互联网项目中，经常用运营活动来做项目推广，这类运营系统往往逻辑复杂，需要根据业务场景进行多次迭代、不断优化。

这些活动并发很高，可以不涉及底层数据库读写，更多的是缓存数据处理。比如常见的投票活动、排行榜活动等

## 为什么Node.js不合适
CPU密集型服务非常不适合使用Node.js来处理。比如：
- 图片处理。比如图片的裁剪、缩放，这些非常损耗CPU计算，应该用其他一般异步进程处理
- 大字符串、大数组类处理。当涉及这些数据时，应考虑如何通过切割来处理，或在其他进程异步处理。
- 大文件读写处理。有时会用Node.js服务来处理Excel，但遇到Excel过大时，会导致Node.js内存溢出，因为V8内存上限是1.4G

总之两个关键因素：大内存和CPU密集型，这些场景都不适合使用Node.js提供服务