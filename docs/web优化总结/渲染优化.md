渲染优化，本质上就是缩小首屏时间     
不同的团队对首屏时间的定义不同，大部分认为首屏时间应该是从页面加载到用户可以进行正常的页面操作时间

#### 首先看看地址栏输入url发生了什么
1.首先会进行 url 解析，根据 dns 系统进行 ip 查找     
2.根据 ip 就可以找到服务器，然后浏览器和服务器会进行 TCP 三次握手建立连接，如果此时是 https 的话，还会建立 TLS 连接以及协商加密算法     
3.连接建立之后浏览器开始发送请求获取文件，此时这里还会出现一种情况就是缓存，建立连接后是走缓存还是直接重新获取，需要看后台设置     
4.首先获取 html 文件，构建 DOM 树，这个过程是边下载边解析，并不是等 html 文件全部下载完了，再去解析 html，这样比较浪费时间，
而是下载一点解析一点     
5.如果有 css 文件，此时下载 css 文件，css 文件也是一边下载一边解析的，构建的是 CSSOM 树，当 DOM 树和 CSSOM
树全部构建完之后，浏览器会把 DOM 树和 CSSOM 树构建成渲染树     
6.样式计算, 构造渲染树的时候还做了哪些事情。第一个就是样式计算，DOM树 和 CSSOM树有了之后，浏览器开始样式计算，主要是为 DOM 树上的节点
找到对应的样式     
7.构建布局树，样式计算完之后就开始构建布局树。主要是为 DOM 树上的节点找到页面上对应位置以及一些"display:none"元素的隐藏
8. 构建分层树，布局树完成后浏览器还需要建立分层树，主要是为了满足滚动条，z-index，position 这些复杂的分层操作
9. 将分层树图块化，利用光栅找到视图窗口下的对应的位图。主要是因为一个页面可能有几屏那么长，一下渲染出来比较浪费，
所以浏览器会找到视图窗口对应的图块，将这部分的图块进行渲染
10.最终渲染进程将整个页面渲染出来，在渲染的过程中会还出现重排和重绘


#### js css顺序对前端优化的影响
1.渲染树的构成必须要DOM树和CSSOM树，所以尽快的构建CSSOM树是一个重要的优化手段。将CSS放在头部，这样DOM树和CSSOM树的构建是同步进行

2.JS的运行会阻止DOM树的渲染。如果将JS放在了头部，而且没有异步加载这些操作，js一旦一直运行，DOM树就一直构建不出来，那么页面就会一直出现
白屏界面所以一般将js放在尾部。

3.JS放在尾部也不是就没有问题了，只是问题相对较小，放到尾部的js文件如果过大，运行时间长，代码加载时，就会有大量耗时操作造成页面不可点击等。


#### 回流重绘为什么会影响渲染，如何避免
1. 重绘。      
> 元素样式的改变，但宽高、大小、位置等不变。如outline，visibility，color，background-color等。


2.回流     
> 元素的大小或者位置发生了变化(当页面布局和几何信息发生变化的时候)，触发了重新布局，导致渲染树重新计算布局和渲染。如添加或删除
可见的DOM元素；元素的位置发生变化；元素的尺寸发生变化；内容发生变化(比如文本变化或图片被另一个不同尺寸的图片所替代)。页面一开始渲染
的时候(这个无法避免)；因为回流是根据视口的大小来计算元素的位置和大小的，所以浏览器的窗口尺寸变化也会引发回流。。。

****注意：回流一定会触发重绘，而重绘不一定会回流****



3.避免方法
>1.js尽量减少对样式的操作，能用css完成的就用css     
2.对dom操作尽量少     
3.如果必须要用js操作样式，能合并尽量合并不要分多次操作
4.resize事件最好加上防抖，能尽量少触发就少触发。
5.加载图片的时候，提前写好宽高
